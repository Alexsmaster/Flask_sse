<!DOCTYPE html>
<html>
<head>
  <title>Flask-SSE Quickstart</title>
</head>
<body>
<h1>Flask-SSE Quickstart</h1>
<a href="/heavy_task">heavy_task</a>
<br>
<a href="/hello">URL - hello</a>
<br>
<a href="/heavy_task"></a>

<div id="001">TextDebug1</div>
<div id="002">TextDebug2</div>
<div id="003">TextDebug3</div>


<script>
  var source = new EventSource("{{ url_for('sse.stream') }}");

  source.addEventListener('greeting', function(event) {
      var data = JSON.parse(event.data);
      document.getElementById("001").innerHTML = "The server says " + data.message;
  }, false);
  source.addEventListener('error', function(event) {

      document.getElementById("001").innerHTML = "Failed to connect to event stream. Is Redis running?";
  }, false);
  var intervalId = window.setInterval(function(){
    document.getElementById("001").innerHTML = "No events came";
    document.getElementById("002").innerHTML = "No events came";
    document.getElementById("003").innerHTML = "No events came";
  }, 2500);

</script>
</body>
</html>